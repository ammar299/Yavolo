<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery.inputmask/3.2.6/jquery.inputmask.bundle.min.js"></script>
<div class="container-fluid">
    <% if params[:action] == 'edit' %>
        <h3 class="mt-4 mb-3">Edit Product</h3>
    <% else %>
        <h3 class="mt-4 mb-3">Create New Product</h3>
    <% end %>
    <div class="formme">
    <div class="file-errors mt-2"></div>
    <%= simple_form_for @product, url: url, method: method, html: { id: 'product_form' } do |form| %>
        <%=hidden_field_tag :product_id, form.object.id || params[:dup_product_id] %>
        <%=form.hidden_field :namespace, value: 'admin', id: 'namespace' %>
        <%= render "shared/products/photos", form: form %>
        <%= render "shared/products/seo_content", form: form %>
        <%= render "shared/products/google_shopping", form: form %>
        <%= render "shared/products/ebay_details", form: form %>
        <%= render "shared/products/listing_details", form: form %>
        <%= render "shared/products/pricing_and_quantity", form: form %>
        <%= render "shared/products/delivery_details", form: form, new_delivery_option_url: new_admin_delivery_option_path %>
        <%= render "shared/products/product_actions_bar", form: form %>
    <% end %>
    <%= render "shared/products/add_new_delivery_option" %>
    <div>

</div>
<script>
    let disEditor;
    $(document).ready(function(){

        ClassicEditor
        .create( document.querySelector( '#product_description' ) )
        .then(newEditor=>{
            disEditor = newEditor;
        })
        .catch( error => {
            console.error( error );
        } );

        ClassicEditor.create( document.querySelector( '#product_google_shopping_attributes_description' ) ).catch( error => {
            console.error( error );
        } );

        ClassicEditor.create( document.querySelector( '#product_seo_content_attributes_description' ) ).catch( error => {
            console.error( error );
        } );
    })
</script>
