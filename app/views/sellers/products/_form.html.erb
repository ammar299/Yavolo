<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery.inputmask/3.2.6/jquery.inputmask.bundle.min.js"></script>
<div class="container-fluid">
    <div class="formme">
      <div class="file-errors mt-2"></div>
      <%= simple_form_for @product, url: url, method: method, html: { id: 'product_form' } do |form| %>
          <%=hidden_field_tag :product_id, form.object.id || params[:dup_product_id] %>
          <%=form.hidden_field :owner_id %>
          <%=form.hidden_field :owner_type %>
          <%=form.hidden_field :namespace, value: 'sellers', id: 'namespace' %>
          <%= render "shared/products/photos", form: form %>
          <%= render "shared/products/listing_details", form: form, hide_seller_field: true %>
          <%= render "shared/products/pricing_and_quantity", form: form %>
          <%= render "shared/products/delivery_details", form: form, new_delivery_option_url: new_sellers_delivery_option_path %>
          <%= render "shared/products/product_actions_bar", form: form %>
      <% end %>
      <%= render "shared/products/add_new_delivery_option" %>
    </div>
</div>
<%= render 'shared/simple_confirm_modal', confirm_statement: 'Are you sure to delete this image?', id: 'yes-delete-img',path: '#', data: nil, modal_id: 'yes-no-product-delete-img-modal' %>
<script>
    let disEditor;
    $(document).ready(function(){
        ClassicEditor
        .create( document.querySelector( '#product_description' ) )
        .then(newEditor=>{
            disEditor = newEditor;
            disEditor.model.document.on( 'change:data', () => {
                $('#product_description').val(disEditor.getData().trim());
                $('#product_description').trigger('change');
            });
        })
        .catch( error => {
            console.error( error );
        });
        validateProductForm();
    })
</script>
